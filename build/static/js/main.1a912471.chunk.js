(this["webpackJsonpzeroconf-wp-plugin"]=this["webpackJsonpzeroconf-wp-plugin"]||[]).push([[0],{1:function(e,t,a){e.exports={Item:"Discovery_Item__2ukVt",Title:"Discovery_Title__3eT40",Back:"Discovery_Back__mo5C4",LeftPanel:"Discovery_LeftPanel__3tiIc",MidPanel:"Discovery_MidPanel__3hlkj",RightPanel:"Discovery_RightPanel__1Ve4X",Show:"Discovery_Show__2ClRv",Hide:"Discovery_Hide__2KeSg",ServiceWrap:"Discovery_ServiceWrap__a_rbe",ErrorWrap:"Discovery_ErrorWrap__2_6L0",Frame:"Discovery_Frame__iP-QS",Row:"Discovery_Row__39C1C",InfoRow:"Discovery_InfoRow__1PJ3D",DetailRow:"Discovery_DetailRow__2Dlb4",Address:"Discovery_Address__xKNFP",Name:"Discovery_Name__3Qyxh",Type:"Discovery_Type__21KWU",InfoWrap:"Discovery_InfoWrap__3mfmW",InfoHead:"Discovery_InfoHead__1FkrL",InfoValue:"Discovery_InfoValue__3FvNy",BtnWrap:"Discovery_BtnWrap__WnakS",Btn:"Discovery_Btn__jm9RC",TextCenter:"Discovery_TextCenter__AQr-M",InfoTitle:"Discovery_InfoTitle__2t5M3",slideInFromLeft:"Discovery_slideInFromLeft__3X5RV",slideOutFromRight:"Discovery_slideOutFromRight__3ENQr"}},11:function(e,t,a){e.exports=a(19)},16:function(e,t,a){},17:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(3),i=a.n(n),o=(a(16),a(17),a(4)),c=a.n(o),l=a(6),m=a(7),u=a(8),v=a(10),d=a(9),p=a(2),h=a.n(p),_=a(1),f=a.n(_),y=function(e){Object(v.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(m.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).baseUrl="http://localzeroconf:15051/a1/xploretv/v1/zeroconf",e.serviceName="TV Dashboard",e.state={error:{code:"Unknown",msg:"Error",reason:"Failed to fetch"}},e.loaded=0,e.mainItems=[{key:"ipv4",name:"IPv4"},{key:"ipv6",name:"IPv6"},{key:"port",name:"Port"},{key:"name",name:"Name"},{key:"domain",name:"Domain"},{key:"host",name:"Host"},{key:"type",name:"Service Type"},{key:"subtype",name:"Service Subtype"}],e.showRight=!1,e.changeIdx=function(t,a){"services"in e.state&&(e.showRight=!1,e.setState({selIdx:a,detailIdx:0}),t.target.scrollIntoView({behavior:"smooth",inline:"center",block:"center"}))},e.changeDetailIdx=function(t,a){"services"in e.state&&(e.showRight=!0,e.setState({detailIdx:a}),t.target.scrollIntoView({behavior:"smooth",inline:"center",block:"center"}))},e}return Object(u.a)(a,[{key:"parseData",value:function(e){var t={};e.forEach((function(e){var a={name:e.name,domain:e.domainName,host:e.hostName,ipv4:e.addresses.ipv4,ipv6:e.addresses.ipv6,type:e.service.type,subtype:e.service.subtype,port:String(e.service.port),record:e.service.txtRecord};e.hostName in t?t[e.hostName].push(a):t[e.hostName]=[a]})),"services"in this.state?this.setState({services:t}):this.setState({services:t,selIdx:0,detailIdx:0,error:!1})}},{key:"requestServices",value:function(){var e=this;fetch(this.baseUrl,{headers:{"Content-Type":"application/json"}}).then(function(){var t=Object(l.a)(c.a.mark((function t(a){var r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.json();case 2:if(r=t.sent,a.ok){t.next=5;break}return t.abrupt("return",e.setState({error:{code:r.code,msg:r.message,reason:r.reason,host:Object({NODE_ENV:"production",PUBLIC_URL:"/wordpress/wp-content/reactpress/apps/zeroconf-wp-plugin/build",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DISCOVERY_URL}}));case 5:return t.abrupt("return",e.parseData(r.services));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){return e.setState({error:{code:"Unknown",msg:"Error",reason:t.message,host:Object({NODE_ENV:"production",PUBLIC_URL:"/wordpress/wp-content/reactpress/apps/zeroconf-wp-plugin/build",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0}).REACT_APP_DISCOVERY_URL}})}))}},{key:"loadData",value:function(){var e=this;0===this.loaded?fetch(this.baseUrl,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.serviceName,replaceWildcards:!0,serviceProtocol:"any",service:{type:"_http._tcp",port:50080,txtRecord:{version:"1.0",provider:"A1 Telekom Austria Group",product:"A1 Service Discovery",path:window.location.protocol+"//"+window.location.hostname+":"+window.location.port}}})}).then((function(e){return e.json()})).then((function(t){if(201!==t.code&&409!==t.code)return e.setState({error:{code:t.code,msg:t.message,reason:t.reason,host:e.baseUrl}});e.requestServices()})).catch((function(t){return e.setState({error:{code:"Unknown",msg:"Error",reason:t.message,host:e.baseUrl}})})):this.requestServices()}},{key:"componentDidMount",value:function(){this.loadData(),this.loaded=Date.now()}},{key:"getNodes",value:function(){var e=this;if("services"in this.state)return Object.keys(this.state.services).map((function(t,a){return s.a.createElement(p.Focusable,{className:f.a.Row+(0===a?" menu-active":""),key:a,onFocus:function(t){return e.changeIdx(t,a)},onKeyUp:function(t){return e.props.hideMenu(t)}},s.a.createElement("p",{className:f.a.Name},e.state.services[t][0].host.replace(/(.local.$|.$)/i,"")),s.a.createElement("p",{className:f.a.Address},e.state.services[t][0].ipv4[0],s.a.createElement("span",{className:f.a.Number}," (",1===e.state.services[t].length?"One service":e.state.services[t].length+" services",")")))}))}},{key:"getServices",value:function(){var e=this;if("services"in this.state){var t=this.state.selIdx;this.state.selIdx>Object.keys(this.state.services).length&&(t=0);var a=this.state.services[Object.keys(this.state.services)[t]];return s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:f.a.Address},"Address"),s.a.createElement("p",{className:f.a.Name},a[0].host),a[0].ipv4.map((function(e,t){return s.a.createElement("p",{key:"ipv4-"+t,className:f.a.Name},e)})),a[0].ipv6.map((function(e,t){return s.a.createElement("p",{key:"ipv6-"+t,className:f.a.Name},e)})),s.a.createElement("div",{className:f.a.InfoWrap},s.a.createElement("p",{className:f.a.Address},"Services"),a.map((function(t,a){return s.a.createElement(p.Focusable,{className:f.a.InfoRow,key:a,onFocus:function(t){return e.changeDetailIdx(t,a)},onKeyUp:function(t){return e.props.hideMenu(t)}},s.a.createElement("p",{className:f.a.Name},t.name),s.a.createElement("p",{className:f.a.Type},t.type))}))))}}},{key:"getLink",value:function(e,t){return e.record.get&&e.record.get.startsWith("http")?e.record.get:"http://"+t+":"+String(e.port)+(e.record.get?e.record.get:"")}},{key:"getButton",value:function(e){var t=this;if(e.type.includes("http"))return e.ipv4.map((function(a,r){return s.a.createElement("div",{className:f.a.BtnWrap,key:"open_btn-"+r},s.a.createElement(p.Focusable,{className:f.a.Btn,onClick:function(){window.open(t.getLink(e,a))}},e.ipv4.length>1?"Open ("+r+")":"Open"))}))}},{key:"getDetailValue",value:function(e,t){return Array.isArray(e[t.key])?e[t.key].map((function(e,a){return s.a.createElement("p",{key:t.key+"-"+a,className:f.a.InfoValue},e)})):s.a.createElement("p",{className:f.a.InfoValue},e[t.key])}},{key:"getServiceDetail",value:function(){var e=this;if("services"in this.state){var t=this.state.detailIdx;if(this.state.services[Object.keys(this.state.services)[this.state.selIdx]].length<t+1)return void(t=0);var a=this.state.services[Object.keys(this.state.services)[this.state.selIdx]][t];return s.a.createElement(p.FocusableSection,{sectionId:"detail-service",neighborUp:"",neighborDown:"",neighborLeft:"@detail-services",neighborRight:"",className:f.a.RightPanel+" "+(this.showRight?f.a.Show:f.a.Hide)},s.a.createElement("div",{className:f.a.Frame},this.getButton(a),s.a.createElement("p",{className:f.a.InfoTitle},"Core"),this.mainItems.map((function(t,r){return a[t.key]&&a[t.key].length>0?s.a.createElement(p.Focusable,{className:f.a.DetailRow,key:"detail_"+r,onFocus:function(e){e.target.scrollIntoView({behavior:"smooth",inline:"center",block:"center"})}},s.a.createElement("p",{className:f.a.InfoHead},t.name),e.getDetailValue(a,t)):null})),s.a.createElement("br",null),s.a.createElement("p",{className:f.a.InfoTitle},"Data"),Object.keys(a.record).map((function(e){return s.a.createElement(p.Focusable,{className:f.a.DetailRow,key:e,onFocus:function(e){e.target.scrollIntoView({behavior:"smooth",inline:"center",block:"center"})}},s.a.createElement("p",{className:f.a.InfoHead},e),s.a.createElement("p",{className:f.a.InfoValue},a.record[e]))}))))}}},{key:"getMenu",value:function(){return!1!==this.state.error?s.a.createElement("div",{className:"modal-menu",ref:this.props.modalRef},s.a.createElement("div",{className:f.a.ServiceWrap},s.a.createElement(p.FocusableSection,{sectionId:"main-service",className:f.a.ErrorWrap},s.a.createElement("div",{className:"Error-item"},s.a.createElement("img",{style:{width:"100%"},src:"/wordpress/wp-content/reactpress/apps/zeroconf-wp-plugin/build/ws_error.svg",alt:"Error"})),s.a.createElement("div",{className:"Error-item"},s.a.createElement("strong",null,"Ups, da ist etwas schief gelaufen.")," Wahrscheinlich fehlt das Zeroconfiguration Networking Service. Bitte wenden Sie sich an den Ger\xe4tehersteller oder an Ihren Dienstanbieter."),s.a.createElement("div",{className:"Error-item"},s.a.createElement("strong",null,"Ooops, something went wrong.")," Probably the Zeroconfiguration Networking Service is missing. Please contact the device manufacturer or your service provider."),s.a.createElement("div",{className:f.a.ErrorCode},s.a.createElement("strong",null,"Host:")," ",this.state.error.host),s.a.createElement("div",{className:f.a.ErrorCode},s.a.createElement("strong",null,"Code:")," ",this.state.error.code),s.a.createElement("div",{className:f.a.ErrorMsg},s.a.createElement("strong",null,this.state.error.msg,":")," ",this.state.error.reason)))):s.a.createElement("div",null,s.a.createElement("h1",{className:f.a.Title},"Service Discovery"),s.a.createElement("div",{className:f.a.ServiceWrap},s.a.createElement(p.FocusableSection,{sectionId:"main-service",neighborUp:"",neighborDown:"",neighborRight:"@detail-services",className:f.a.LeftPanel},s.a.createElement("div",{className:f.a.Frame},s.a.createElement("p",{className:f.a.Address+" "+f.a.TextCenter},"Hosts"),this.getNodes())),s.a.createElement(p.FocusableSection,{sectionId:"detail-services",neighborUp:"",neighborDown:"",neighborLeft:"@main-service",neighborRight:"@detail-service",className:f.a.MidPanel},s.a.createElement("div",{className:f.a.Frame},this.getServices())),this.getServiceDetail()))}},{key:"render",value:function(){return this.getMenu()}}]),a}(r.Component);var g=function(){return s.a.createElement("div",{className:"App"},s.a.createElement(h.a,{className:"App"},s.a.createElement(y,{hideMenu:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=[8,27,403,461];(a.includes(e.keyCode)||!1===t)&&window.history.back()}})))};i.a.render(s.a.createElement(s.a.Fragment,null,s.a.createElement(g,null)),document.getElementById("root"))}},[[11,1,2]]]);
//# sourceMappingURL=main.1a912471.chunk.js.map